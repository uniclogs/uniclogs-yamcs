<?xml version="1.0" encoding="UTF-8"?>
<SpaceSystem name="Oresat0" xmlns:xtce="http://www.omg.org/space/xtce" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.omg.org/spec/XTCE/20180204 https://www.omg.org/spec/XTCE/20180204/SpaceSystem.xsd">
    <Header validationStatus="Working" classification="NotClassified" version="2.0" date="2022-09-08">
        <AuthorSet>
            <Author>Portland State Aerospace Society (PSAS)</Author>
        </AuthorSet>
    </Header>
    <TelemetryMetaData>
        <ParameterTypeSet>
            <IntegerParameterType name="uint1" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="1"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint3" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="3"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint4" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="4"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint5" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="5"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint6" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="6"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint7" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="7"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint8" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="8"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint16" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="16"/>
            </IntegerParameterType>
            <IntegerParameterType name="uint32" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="32"/>
            </IntegerParameterType>
            <IntegerParameterType name="int8" signed="true">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="twosComplement" sizeInBits="8"/>
            </IntegerParameterType>
            <StringParameterType name="string8">
                <StringDataEncoding encoding="UTF-8">
                    <SizeInBits>
                        <Fixed>
                            <FixedValue>8</FixedValue>
                        </Fixed>
                    </SizeInBits>
                </StringDataEncoding>
            </StringParameterType>
            <StringParameterType name="string24">
                <StringDataEncoding encoding="UTF-8">
                    <SizeInBits>
                        <Fixed>
                            <FixedValue>24</FixedValue>
                        </Fixed>
                    </SizeInBits>
                </StringDataEncoding>
            </StringParameterType>
            <EnumeratedParameterType name="srcdest">
                <IntegerDataEncoding sizeInBits="1"/>
                <EnumerationList>
                    <Enumeration value="0" label="Source"/>
                    <Enumeration value="1" label="Destination"/>
                </EnumerationList>
            </EnumeratedParameterType>
            <EnumeratedParameterType name="trunc">
                <IntegerDataEncoding sizeInBits="1"/>
                <EnumerationList>
                    <Enumeration value="0" label="Header Not Truncated"/>
                    <Enumeration value="1" label="Header Truncated"/>
                </EnumerationList>
            </EnumeratedParameterType>
            <EnumeratedParameterType name="bypass">
                <IntegerDataEncoding sizeInBits="1"/>
                <EnumerationList>
                    <Enumeration value="0" label="Sequence Controlled QoS"/>
                    <Enumeration value="1" label="Expedited QoS"/>
                </EnumerationList>
            </EnumeratedParameterType>
            <EnumeratedParameterType name="protoctrl">
                <IntegerDataEncoding sizeInBits="1"/>
                <EnumerationList>
                    <Enumeration value="0" label="TFDF contains user data"/>
                    <Enumeration value="1" label="TFDF contains protocol information"/>
                </EnumerationList>
            </EnumeratedParameterType>
            <EnumeratedParameterType name="opctrl">
                <IntegerDataEncoding sizeInBits="1"/>
                <EnumerationList>
                    <Enumeration value="0" label="Operational Control Field is present"/>
                    <Enumeration value="1" label="Operational Control Field is not present"/>
                </EnumerationList>
            </EnumeratedParameterType>
        </ParameterTypeSet>
        <ParameterSet>
            <Parameter parameterTypeRef="uint4" name="Version_Number"/>
            <Parameter parameterTypeRef="uint16" name="Spacecraft_ID"/>
            <Parameter parameterTypeRef="srcdest" name="Source_or_Destination"/>
            <Parameter parameterTypeRef="uint6" name="Virtual_Channel_ID"/>
            <Parameter parameterTypeRef="uint4" name="Multiplexer_Access_Point_ID"/>
            <Parameter parameterTypeRef="trunc" name="EOF_Flag"/>
            <Parameter parameterTypeRef="uint16" name="Frame_Length"/>
            <Parameter parameterTypeRef="bypass" name="Bypass_Flag"/>
            <Parameter parameterTypeRef="protoctrl" name="Protocol_Control_Flag"/>
            <Parameter parameterTypeRef="opctrl" name="Operational_Control_Flag"/>
            <Parameter parameterTypeRef="uint3" name="VC_Frame_Count_Length"/>
            <Parameter parameterTypeRef="uint3" name="TFDZ_Construction"/>
            <Parameter parameterTypeRef="uint5" name="USLP_Protocol_ID"/>
        </ParameterSet>
        <ContainerSet>
            <SequenceContainer abstract="true" name="USLP_Packet">
                <EntryList>
                    <ParameterRefEntry parameterRef="Version_Number">
                        <LocationInContainerInBits referenceLocation="containerStart">
                            <FixedValue>0</FixedValue>
                        </LocationInContainerInBits>
                    </ParameterRefEntry>
                    <ParameterRefEntry parameterRef="Spacecraft_ID"/>
                    <ParameterRefEntry parameterRef="Source_or_Destination"/>
                    <ParameterRefEntry parameterRef="Virtual_Channel_ID"/>
                    <ParameterRefEntry parameterRef="Multiplexer_Access_Point_ID"/>
                    <ParameterRefEntry parameterRef="EOF_Flag"/>
                    <ParameterRefEntry parameterRef="Frame_Length"/>
                    <ParameterRefEntry parameterRef="Bypass_Flag"/>
                    <ParameterRefEntry parameterRef="Protocol_Control_Flag"/>
                    <ParameterRefEntry parameterRef="Operational_Control_Flag">
                        <LocationInContainerInBits referenceLocation="containerStart">
                            <FixedValue>52</FixedValue>
                        </LocationInContainerInBits>
                    </ParameterRefEntry>
                    <ParameterRefEntry parameterRef="VC_Frame_Count_Length"/>
                    <ParameterRefEntry parameterRef="TFDZ_Construction"/>
                    <ParameterRefEntry parameterRef="USLP_Protocol_ID"/>
                </EntryList>
            </SequenceContainer>
        </ContainerSet>
    </TelemetryMetaData>
    <CommandMetaData>
        <ArgumentTypeSet>
            <IntegerArgumentType name="uint8" signed="false">
                <UnitSet/>
                <IntegerDataEncoding byteOrder="leastSignificantByteFirst" encoding="unsigned" sizeInBits="8"/>
            </IntegerArgumentType>
        </ArgumentTypeSet>
        <MetaCommandSet>
            <MetaCommand abstract="true" name="EDL_Command">
                <LongDescription>Abstract Command for all EDL Commands</LongDescription>
                <ArgumentList>
                    <Argument name="Command" argumentTypeRef="uint8" />
                </ArgumentList>
                <CommandContainer name="EDL_Command_Packet">
                    <BaseContainer containerRef="USLP_Packet">
                        <RestrictionCriteria>
                            <ComparisonList>
                                <Comparison parameterRef="Version_Number" value="12"/>
                                <Comparison parameterRef="Source_or_Destination" value="1"/>
                            </ComparisonList>
                        </RestrictionCriteria>
                    </BaseContainer>
                    <EntryList>
                        <ArgumentRefEntry argumentRef="Command"/>
                    </EntryList>
                </CommandContainer>
                <VerifierSet>
                    <CompleteVerifier>
                        <Comparison value="0" parameterRef="Source_or_Destination"/>
                        <CheckWindow timeToStopChecking="PT15S" timeWindowIsRelativeTo="commandRelease"/>
                    </CompleteVerifier>
                </VerifierSet>
            </MetaCommand>
        </MetaCommandSet>
    </CommandMetaData>
</SpaceSystem>